<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            direction: rtl;
        }
        
        .app-container {
            background: white;
            border-radius: 30px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            width: 95%;
            max-width: 1000px;
            height: 90vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }
        
        /* ===== Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ===== */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
        }
        
        .menu-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.3s;
            color: white;
            font-size: 24px;
        }
        
        .menu-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        .title {
            font-size: 20px;
            font-weight: bold;
        }
        
        .send-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.3s;
            color: white;
            font-size: 24px;
        }
        
        .send-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }
        
        /* ===== Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© ===== */
        .sidebar {
            position: absolute;
            top: 0;
            right: -300px;
            width: 280px;
            height: 100%;
            background: white;
            box-shadow: -5px 0 25px rgba(0,0,0,0.2);
            transition: 0.3s;
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
        }
        
        .sidebar.open {
            right: 0;
        }
        
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #667eea;
        }
        
        .sidebar-item {
            padding: 15px;
            margin-bottom: 10px;
            background: #f8f9fa;
            border-radius: 15px;
            cursor: pointer;
            transition: 0.3s;
        }
        
        .sidebar-item:hover {
            background: #e9ecef;
            transform: translateX(-5px);
        }
        
        .sidebar-item i {
            margin-left: 10px;
            color: #667eea;
        }
        
        .language-list {
            display: none;
            padding-right: 20px;
            margin-top: 5px;
        }
        
        .language-list.show {
            display: block;
        }
        
        .language-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: 0.2s;
        }
        
        .language-item:hover {
            background: #e3f2fd;
        }
        
        .language-item.active {
            background: #667eea;
            color: white;
        }
        
        /* ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ===== */
        .answer-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f7fb;
        }
        
        .answer-container {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            min-height: 100px;
            white-space: pre-wrap;
            line-height: 1.8;
            font-size: 16px;
        }
        
        .domain-badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 50px;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        /* ===== Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ ===== */
        .input-area {
            background: white;
            border-top: 2px solid #f0f0f0;
            padding: 15px;
        }
        
        .input-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        #question {
            flex: 1;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            padding: 15px 20px;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
            min-height: 60px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }
        
        #question:focus {
            border-color: #667eea;
        }
        
        /* ===== Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ ===== */
        .keyboard-toggle {
            background: #f0f0f0;
            border: none;
            padding: 10px;
            border-radius: 25px;
            width: 100%;
            margin: 10px 0;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s;
        }
        
        .keyboard-toggle:hover {
            background: #e0e0e0;
        }
        
        .math-keyboard {
            display: none;
            background: #f8f9fa;
            border-radius: 20px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .math-keyboard.show {
            display: block;
        }
        
        .keyboard-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
        }
        
        .key-btn {
            aspect-ratio: 1;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #333;
        }
        
        .key-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }
        
        .key-btn:active {
            transform: scale(0.95);
        }
        
        /* ===== Ø§Ù„ØªØ­Ù…ÙŠÙ„ ===== */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== Ù…Ø³Ø§Ø¹Ø¯Ø§Øª ===== */
        .error {
            color: #dc3545;
            padding: 10px;
            background: #f8d7da;
            border-radius: 10px;
        }
        
        .success {
            color: #28a745;
            padding: 10px;
            background: #d4edda;
            border-radius: 10px;
        }
        
        /* ===== ØªÙ†Ø³ÙŠÙ‚ RTL/LTR ===== */
        body.ltr {
            direction: ltr;
        }
        
        body.ltr .sidebar {
            right: auto;
            left: -300px;
        }
        
        body.ltr .sidebar.open {
            left: 0;
            right: auto;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <div class="header">
            <button class="menu-btn" onclick="toggleSidebar()">â˜°</button>
            <div class="title" id="app-title">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ</div>
            <button class="send-btn" onclick="sendQuestion()">â¡ï¸</button>
        </div>
        
        <!-- Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠØ© -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3 id="menu-title">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</h3>
                <button class="close-btn" onclick="toggleSidebar()">âœ•</button>
            </div>
            
            <div class="sidebar-item" onclick="toggleLanguages()">
                <span>ğŸŒ</span> <span id="language-label">Ø§Ù„Ù„ØºØ©</span>
            </div>
            <div class="language-list" id="language-list">
                <div class="language-item active" onclick="changeLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</div>
                <div class="language-item" onclick="changeLanguage('en')">ğŸ‡¬ğŸ‡§ English</div>
                <div class="language-item" onclick="changeLanguage('de')">ğŸ‡©ğŸ‡ª Deutsch</div>
                <div class="language-item" onclick="changeLanguage('tr')">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</div>
                <div class="language-item" onclick="changeLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</div>
                <div class="language-item" onclick="changeLanguage('ru')">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</div>
            </div>
            
            <div class="sidebar-item" onclick="showHelp()">
                <span>â“</span> <span id="help-label">Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</span>
            </div>
            
            <div class="sidebar-item" onclick="showAbout()">
                <span>â„¹ï¸</span> <span id="about-label">Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</span>
            </div>
        </div>
        
        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© -->
        <div class="answer-area" id="answerArea">
            <div class="answer-container" id="answerContainer">
                <div id="domainDisplay"></div>
                <div id="answerContent">Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ ÙˆØ§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù‡Ù… Ù„Ù„Ø¥Ø±Ø³Ø§Ù„</div>
            </div>
        </div>
        
        <!-- Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ -->
        <div class="input-area">
            <div class="input-container">
                <textarea id="question" rows="2" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."></textarea>
            </div>
            
            <button class="keyboard-toggle" onclick="toggleKeyboard()" id="keyboardBtn">
                âŒ¨ï¸ Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­
            </button>
            
            <div class="math-keyboard" id="mathKeyboard">
                <div class="keyboard-grid">
                    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø£ÙˆÙ„ -->
                    <button class="key-btn" onclick="insertSymbol('7')">7</button>
                    <button class="key-btn" onclick="insertSymbol('8')">8</button>
                    <button class="key-btn" onclick="insertSymbol('9')">9</button>
                    <button class="key-btn" onclick="insertSymbol('/')">Ã·</button>
                    <button class="key-btn" onclick="insertSymbol('^')">^</button>
                    <button class="key-btn" onclick="insertSymbol('âˆš')">âˆš</button>
                    
                    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ -->
                    <button class="key-btn" onclick="insertSymbol('4')">4</button>
                    <button class="key-btn" onclick="insertSymbol('5')">5</button>
                    <button class="key-btn" onclick="insertSymbol('6')">6</button>
                    <button class="key-btn" onclick="insertSymbol('*')">Ã—</button>
                    <button class="key-btn" onclick="insertSymbol('(')">(</button>
                    <button class="key-btn" onclick="insertSymbol(')')">)</button>
                    
                    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù„Ø« -->
                    <button class="key-btn" onclick="insertSymbol('1')">1</button>
                    <button class="key-btn" onclick="insertSymbol('2')">2</button>
                    <button class="key-btn" onclick="insertSymbol('3')">3</button>
                    <button class="key-btn" onclick="insertSymbol('-')">âˆ’</button>
                    <button class="key-btn" onclick="insertSymbol('âˆ«')">âˆ«</button>
                    <button class="key-btn" onclick="insertSymbol('Î£')">Î£</button>
                    
                    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹ -->
                    <button class="key-btn" onclick="insertSymbol('0')">0</button>
                    <button class="key-btn" onclick="insertSymbol('.')">.</button>
                    <button class="key-btn" onclick="insertSymbol('=')">=</button>
                    <button class="key-btn" onclick="insertSymbol('+')">+</button>
                    <button class="key-btn" onclick="insertSymbol('Ï€')">Ï€</button>
                    <button class="key-btn" onclick="insertSymbol('âˆ')">âˆ</button>
                    
                    <!-- Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³ -->
                    <button class="key-btn" onclick="insertSymbol('sin')">sin</button>
                    <button class="key-btn" onclick="insertSymbol('cos')">cos</button>
                    <button class="key-btn" onclick="insertSymbol('tan')">tan</button>
                    <button class="key-btn" onclick="insertSymbol('log')">log</button>
                    <button class="key-btn" onclick="insertSymbol('ln')">ln</button>
                    <button class="key-btn" onclick="insertSymbol('e')">e</button>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ============================================================
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        // ============================================================
        let currentLanguage = 'ar';
        let isKeyboardVisible = false;
        
        const translations = {
            'ar': {
                'title': 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ',
                'menu': 'Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',
                'language': 'Ø§Ù„Ù„ØºØ©',
                'help': 'Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©',
                'about': 'Ø¹Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚',
                'keyboard_show': 'âŒ¨ï¸ Ø¥Ø¸Ù‡Ø§Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­',
                'keyboard_hide': 'âŒ¨ï¸ Ø¥Ø®ÙØ§Ø¡ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­',
                'placeholder': 'Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§...',
                'default_answer': 'Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ ÙˆØ§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø³Ù‡Ù… Ù„Ù„Ø¥Ø±Ø³Ø§Ù„',
                'loading': 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©...'
            },
            'en': {
                'title': 'Engineering Assistant',
                'menu': 'Menu',
                'language': 'Language',
                'help': 'Help',
                'about': 'About',
                'keyboard_show': 'âŒ¨ï¸ Show Keyboard',
                'keyboard_hide': 'âŒ¨ï¸ Hide Keyboard',
                'placeholder': 'Type your question here...',
                'default_answer': 'Type your question and press the arrow to send',
                'loading': 'â³ Searching for answer...'
            },
            'de': {
                'title': 'Engineering-Assistent',
                'menu': 'MenÃ¼',
                'language': 'Sprache',
                'help': 'Hilfe',
                'about': 'Ãœber',
                'keyboard_show': 'âŒ¨ï¸ Tastatur anzeigen',
                'keyboard_hide': 'âŒ¨ï¸ Tastatur ausblenden',
                'placeholder': 'Frage eingeben...',
                'default_answer': 'Frage eingeben und Pfeil drÃ¼cken',
                'loading': 'â³ Suche nach Antwort...'
            },
            'tr': {
                'title': 'MÃ¼hendislik AsistanÄ±',
                'menu': 'MenÃ¼',
                'language': 'Dil',
                'help': 'YardÄ±m',
                'about': 'HakkÄ±nda',
                'keyboard_show': 'âŒ¨ï¸ Klavyeyi GÃ¶ster',
                'keyboard_hide': 'âŒ¨ï¸ Klavyeyi Gizle',
                'placeholder': 'Sorunuzu yazÄ±n...',
                'default_answer': 'Sorunuzu yazÄ±n ve oka basÄ±n',
                'loading': 'â³ Cevap aranÄ±yor...'
            },
            'fr': {
                'title': 'Assistant d\'ingÃ©nierie',
                'menu': 'Menu',
                'language': 'Langue',
                'help': 'Aide',
                'about': 'Ã€ propos',
                'keyboard_show': 'âŒ¨ï¸ Afficher clavier',
                'keyboard_hide': 'âŒ¨ï¸ Cacher clavier',
                'placeholder': 'Tapez votre question...',
                'default_answer': 'Tapez votre question et appuyez sur la flÃ¨che',
                'loading': 'â³ Recherche de rÃ©ponse...'
            },
            'ru': {
                'title': 'Ğ˜Ğ½Ğ¶ĞµĞ½ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº',
                'menu': 'ĞœĞµĞ½Ñ',
                'language': 'Ğ¯Ğ·Ñ‹Ğº',
                'help': 'ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ',
                'about': 'Ğ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸',
                'keyboard_show': 'âŒ¨ï¸ ĞŸĞ¾ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ',
                'keyboard_hide': 'âŒ¨ï¸ Ğ¡ĞºÑ€Ñ‹Ñ‚ÑŒ ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ñƒ',
                'placeholder': 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ...',
                'default_answer': 'Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ Ğ¸ Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ÑÑ‚Ñ€ĞµĞ»ĞºÑƒ',
                'loading': 'â³ ĞŸĞ¾Ğ¸ÑĞº Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°...'
            }
        };
        
        // ============================================================
        // Ø¯ÙˆØ§Ù„ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        // ============================================================
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }
        
        function toggleLanguages() {
            document.getElementById('language-list').classList.toggle('show');
        }
        
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù„ØºØ© Ø§Ù„Ù†Ø´Ø·Ø©
            document.querySelectorAll('.language-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØµÙˆØµ
            document.getElementById('app-title').textContent = translations[lang].title;
            document.getElementById('menu-title').textContent = translations[lang].menu;
            document.getElementById('language-label').textContent = translations[lang].language;
            document.getElementById('help-label').textContent = translations[lang].help;
            document.getElementById('about-label').textContent = translations[lang].about;
            document.getElementById('keyboardBtn').textContent = isKeyboardVisible ? 
                translations[lang].keyboard_hide : translations[lang].keyboard_show;
            document.getElementById('question').placeholder = translations[lang].placeholder;
            document.getElementById('answerContent').textContent = translations[lang].default_answer;
            
            // ØªØ­Ø¯ÙŠØ« Ø§ØªØ¬Ø§Ù‡ Ø§Ù„ØµÙØ­Ø©
            if (lang === 'ar') {
                document.body.style.direction = 'rtl';
                document.body.classList.remove('ltr');
            } else {
                document.body.style.direction = 'ltr';
                document.body.classList.add('ltr');
            }
            
            toggleSidebar();
        }
        
        function toggleKeyboard() {
            const keyboard = document.getElementById('mathKeyboard');
            isKeyboardVisible = !isKeyboardVisible;
            keyboard.classList.toggle('show');
            document.getElementById('keyboardBtn').textContent = isKeyboardVisible ?
                translations[currentLanguage].keyboard_hide : translations[currentLanguage].keyboard_show;
        }
        
        function insertSymbol(symbol) {
            const question = document.getElementById('question');
            const start = question.selectionStart;
            const end = question.selectionEnd;
            const text = question.value;
            
            question.value = text.substring(0, start) + symbol + text.substring(end);
            question.focus();
            question.selectionStart = question.selectionEnd = start + symbol.length;
        }
        
        async function showHelp() {
            try {
                const response = await fetch(`/api/help?lang=${currentLanguage}`);
                const data = await response.json();
                document.getElementById('answerContent').innerHTML = data.help.replace(/\n/g, '<br>');
                toggleSidebar();
            } catch (error) {
                document.getElementById('answerContent').innerHTML = 'Error loading help';
            }
        }
        
        async function showAbout() {
            try {
                const response = await fetch(`/api/help?lang=${currentLanguage}`);
                const data = await response.json();
                document.getElementById('answerContent').innerHTML = data.about.replace(/\n/g, '<br>');
                toggleSidebar();
            } catch (error) {
                document.getElementById('answerContent').innerHTML = 'Error loading about';
            }
        }
        
        async function sendQuestion() {
            const question = document.getElementById('question').value.trim();
            if (!question) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ ÙƒØªØ§Ø¨Ø© Ø³Ø¤Ø§Ù„');
                return;
            }
            
            document.getElementById('answerContent').innerHTML = translations[currentLanguage].loading;
            
            try {
                const response = await fetch('/api/ask', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        question: question,
                        language: currentLanguage
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    let answerHtml = '';
                    
                    if (data.domain) {
                        answerHtml += `<div class="domain-badge">ğŸ“š ${data.domain}</div>`;
                    }
                    
                    answerHtml += data.answer.replace(/\n/g, '<br>');
                    document.getElementById('answerContent').innerHTML = answerHtml;
                } else {
                    document.getElementById('answerContent').innerHTML = `<div class="error">${data.error}</div>`;
                }
            } catch (error) {
                document.getElementById('answerContent').innerHTML = `<div class="error">âŒ Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„</div>`;
            }
        }
        
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
        document.getElementById('question').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendQuestion();
            }
        });
    </script>
</body>
</html>
